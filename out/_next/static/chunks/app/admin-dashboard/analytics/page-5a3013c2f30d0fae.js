(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[924],{5880:(e,t,s)=>{Promise.resolve().then(s.bind(s,93397))},22293:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(64812),r=s(13673);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},30487:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s(6012);s(18192);var r=s(53262),i=s(22293);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:s}),t),...r})}},31564:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>l});var a=s(6012),r=s(18192),i=s(22293);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});n.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});d.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},73226:(e,t,s)=>{"use strict";s.d(t,{bq:()=>m,eb:()=>f,gC:()=>p,l6:()=>o,yv:()=>x});var a=s(6012),r=s(18192),i=s(80001),n=s(11669),l=s(81784),d=s(70441),c=s(22293);let o=i.bL;i.YJ;let x=i.WT,m=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(i.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,a.jsx)(i.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=i.l9.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});h.displayName=i.PP.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});u.displayName=i.wn.displayName;let p=r.forwardRef((e,t)=>{let{className:s,children:r,position:n="popper",...l}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...l,children:[(0,a.jsx)(h,{}),(0,a.jsx)(i.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(u,{})]})})});p.displayName=i.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=i.JU.displayName;let f=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(i.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(i.p4,{children:r})]})});f.displayName=i.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=i.wv.displayName},90148:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>d,TN:()=>c});var a=s(6012),r=s(18192),i=s(53262),n=s(22293);let l=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,...i}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(l({variant:r}),s),...i})});d.displayName="Alert",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",s),...r})});c.displayName="AlertDescription"},93397:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var a=s(6012),r=s(18192),i=s(31564),n=s(73226),l=s(90148),d=s(21044),c=s(60853),o=s(22370),x=s(20409),m=s(93806),h=s(37191),u=s(20322),p=s(29093),f=s(22942),j=s(56293),g=s(21360),v=s(61883),y=s(55785),N=s(68931),b=s(83776),w=s(94193),k=s(96409),R=s(58403),F=s(65763),S=s(58924),A=s(95773),C=s(95101);function M(){let[e,t]=(0,r.useState)(null),[s,M]=(0,r.useState)(!0),[P,T]=(0,r.useState)(""),[B,D]=(0,r.useState)("30d"),[W,E]=(0,r.useState)("all"),Z="http://localhost:3001";(0,r.useEffect)(()=>{K()},[B,W]);let K=async()=>{try{M(!0),T("");let e=await fetch("".concat(Z,"/admin/create-store"),{credentials:"include",headers:{"Content-Type":"application/json"}}),s=await fetch("".concat(Z,"/admin/subscription-packages"),{credentials:"include",headers:{"Content-Type":"application/json"}}),a=0,r=0,i=0,n=[],l=[],d=[],c=[];if(e.ok){let t=await e.json();a=t.data.length,r=t.data.filter(e=>"active"===e.subscriptionStatus).length,d=["Jan 2024","Feb 2024","Mar 2024","Apr 2024","May 2024","Jun 2024"].map((e,t)=>({month:e,revenue:Math.floor(2e4*Math.random())+15e3,newStores:Math.floor(10*Math.random())+5,renewals:Math.floor(8*Math.random())+3})),l=t.data.slice(0,5).map((e,t)=>({name:e.name,revenue:Math.floor(1e4*Math.random())+2e3,locations:1,package:e.subscriptionPlan||"Basic"}))}s.ok&&(n=(await s.json()).data.slice(0,3).map((e,t)=>({package:e.name,count:Math.floor(15*Math.random())+5,revenue:(e.price||500)*(Math.floor(15*Math.random())+5)}))),c=["2024-01","2024-02","2024-03","2024-04","2024-05","2024-06"].map((e,t)=>({date:e,active:Math.floor(20*Math.random())+30,expiring:Math.floor(5*Math.random())+2,expired:Math.floor(3*Math.random())+1})),i=n.reduce((e,t)=>e+t.revenue,0),t({totalStores:a,totalActiveSubscriptions:r,totalRevenue:i,monthlyRevenue:d,packageDistribution:n,topStores:l,subscriptionTrends:c})}catch(e){console.error("Error fetching analytics data:",e),T("Failed to load analytics data")}finally{M(!1)}},L=e=>new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),I=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];return s?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading analytics data..."})]})}):P?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(l.Fc,{variant:"destructive",children:(0,a.jsx)(l.TN,{children:P})})}):e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Revenue Analytics"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"System-wide performance metrics and subscription insights"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(n.l6,{value:B,onValueChange:D,children:[(0,a.jsxs)(n.bq,{className:"w-32",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)(n.yv,{})]}),(0,a.jsxs)(n.gC,{children:[(0,a.jsx)(n.eb,{value:"7d",children:"Last 7 days"}),(0,a.jsx)(n.eb,{value:"30d",children:"Last 30 days"}),(0,a.jsx)(n.eb,{value:"90d",children:"Last 90 days"}),(0,a.jsx)(n.eb,{value:"1y",children:"Last year"})]})]}),(0,a.jsxs)(n.l6,{value:W,onValueChange:E,children:[(0,a.jsxs)(n.bq,{className:"w-40",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)(n.yv,{placeholder:"All packages"})]}),(0,a.jsxs)(n.gC,{children:[(0,a.jsx)(n.eb,{value:"all",children:"All packages"}),(0,a.jsx)(n.eb,{value:"Basic",children:"Basic"}),(0,a.jsx)(n.eb,{value:"Premium",children:"Premium"}),(0,a.jsx)(n.eb,{value:"Enterprise",children:"Enterprise"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(C.f,{title:"Total Stores",value:e.totalStores.toString(),icon:R.A,description:"Active customer accounts",trend:{value:"+5 this month",isPositive:!0}}),(0,a.jsx)(C.f,{title:"Active Subscriptions",value:e.totalActiveSubscriptions.toString(),icon:F.A,description:"Paying customers",trend:{value:"+3 this month",isPositive:!0}}),(0,a.jsx)(C.f,{title:"Store Locations",value:e.totalStores.toString(),icon:S.A,description:"Store locations",trend:{value:"+7 this month",isPositive:!0}}),(0,a.jsx)(C.f,{title:"Total Revenue",value:L(e.totalRevenue),icon:A.A,description:"Monthly recurring revenue",trend:{value:"+12% from last month",isPositive:!0}})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Revenue Trends"}),(0,a.jsx)(i.BT,{children:"Monthly revenue, new stores, and renewals"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(d.u,{width:"100%",height:"100%",children:(0,a.jsxs)(c.Q,{data:e.monthlyRevenue,children:[(0,a.jsx)(o.d,{strokeDasharray:"3 3"}),(0,a.jsx)(x.W,{dataKey:"month"}),(0,a.jsx)(m.h,{yAxisId:"left",tickFormatter:e=>L(e)}),(0,a.jsx)(m.h,{yAxisId:"right",orientation:"right"}),(0,a.jsx)(h.m,{formatter:(e,t)=>"revenue"===t?[L(Number(e)),"Revenue"]:[e,"newStores"===t?"New Stores":"Renewals"]}),(0,a.jsx)(u.s,{}),(0,a.jsx)(p.G,{yAxisId:"left",type:"monotone",dataKey:"revenue",stroke:"#0088FE",fill:"#0088FE",fillOpacity:.2,name:"Revenue",strokeWidth:2}),(0,a.jsx)(f.N,{yAxisId:"right",type:"monotone",dataKey:"newStores",stroke:"#00C49F",name:"New Stores",strokeWidth:2,dot:{r:4}}),(0,a.jsx)(f.N,{yAxisId:"right",type:"monotone",dataKey:"renewals",stroke:"#FF8042",name:"Renewals",strokeWidth:2,dot:{r:4}})]})})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Package Distribution"}),(0,a.jsx)(i.BT,{children:"Revenue by subscription packages"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(d.u,{width:"100%",height:"100%",children:(0,a.jsxs)(j.r,{children:[(0,a.jsx)(g.F,{data:e.packageDistribution,cx:"50%",cy:"50%",labelLine:!0,label:e=>{let{package:t,percent:s}=e;return"".concat(t,": ").concat((100*s).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"revenue",nameKey:"package",children:e.packageDistribution.map((e,t)=>(0,a.jsx)(v.f,{fill:I[t%I.length]},"cell-".concat(t)))}),(0,a.jsx)(h.m,{formatter:e=>L(Number(e))}),(0,a.jsx)(u.s,{})]})})})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Top Performing Stores"}),(0,a.jsx)(i.BT,{children:"Highest revenue generating customers"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(d.u,{width:"100%",height:"100%",children:(0,a.jsxs)(y.E,{data:e.topStores,children:[(0,a.jsx)(o.d,{strokeDasharray:"3 3"}),(0,a.jsx)(x.W,{dataKey:"name"}),(0,a.jsx)(m.h,{tickFormatter:e=>L(e)}),(0,a.jsx)(h.m,{formatter:e=>L(Number(e))}),(0,a.jsx)(u.s,{}),(0,a.jsx)(N.y,{dataKey:"revenue",fill:"#8884d8",name:"Revenue",children:e.topStores.map((e,t)=>(0,a.jsx)(v.f,{fill:I[t%I.length]},"cell-".concat(t)))})]})})})})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Subscription Status Trends"}),(0,a.jsx)(i.BT,{children:"Active, expiring, and expired subscriptions over time"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(d.u,{width:"100%",height:"100%",children:(0,a.jsxs)(b.b,{data:e.subscriptionTrends,children:[(0,a.jsx)(o.d,{strokeDasharray:"3 3"}),(0,a.jsx)(x.W,{dataKey:"date"}),(0,a.jsx)(m.h,{}),(0,a.jsx)(h.m,{}),(0,a.jsx)(u.s,{}),(0,a.jsx)(f.N,{type:"monotone",dataKey:"active",stroke:"#00C49F",name:"Active",strokeWidth:2,dot:{r:4}}),(0,a.jsx)(f.N,{type:"monotone",dataKey:"expiring",stroke:"#FFBB28",name:"Expiring",strokeWidth:2,dot:{r:4}}),(0,a.jsx)(f.N,{type:"monotone",dataKey:"expired",stroke:"#FF8042",name:"Expired",strokeWidth:2,dot:{r:4}})]})})})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Package Performance"}),(0,a.jsx)(i.BT,{children:"Detailed metrics by subscription tier"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left p-4",children:"Package"}),(0,a.jsx)("th",{className:"text-right p-4",children:"Stores"}),(0,a.jsx)("th",{className:"text-right p-4",children:"Revenue"}),(0,a.jsx)("th",{className:"text-right p-4",children:"Avg Revenue/Store"}),(0,a.jsx)("th",{className:"text-right p-4",children:"Locations"})]})}),(0,a.jsxs)("tbody",{children:[e.packageDistribution.map((t,s)=>{e.packageDistribution.find(e=>e.package===t.package);let r=e.topStores.filter(e=>e.package===t.package).reduce((e,t)=>e+t.locations,0);return(0,a.jsxs)("tr",{className:"border-b hover:bg-muted/50",children:[(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("div",{className:"font-medium",children:t.package})}),(0,a.jsx)("td",{className:"p-4 text-right",children:t.count}),(0,a.jsx)("td",{className:"p-4 text-right font-medium",children:L(t.revenue)}),(0,a.jsx)("td",{className:"p-4 text-right",children:L(t.revenue/t.count)}),(0,a.jsx)("td",{className:"p-4 text-right",children:r})]},s)}),(0,a.jsxs)("tr",{className:"font-semibold",children:[(0,a.jsx)("td",{className:"p-4",children:"Total"}),(0,a.jsx)("td",{className:"p-4 text-right",children:e.packageDistribution.reduce((e,t)=>e+t.count,0)}),(0,a.jsx)("td",{className:"p-4 text-right",children:L(e.packageDistribution.reduce((e,t)=>e+t.revenue,0))}),(0,a.jsx)("td",{className:"p-4 text-right",children:L(e.packageDistribution.reduce((e,t)=>e+t.revenue,0)/e.packageDistribution.reduce((e,t)=>e+t.count,0))}),(0,a.jsx)("td",{className:"p-4 text-right",children:e.topStores.reduce((e,t)=>e+t.locations,0)})]})]})]})})})]})]}):(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(l.Fc,{children:(0,a.jsx)(l.TN,{children:"No analytics data available"})})})}},95101:(e,t,s)=>{"use strict";s.d(t,{f:()=>n});var a=s(6012);s(18192);var r=s(31564),i=s(30487);function n(e){let{title:t,value:s,description:n,icon:l,trend:d,badge:c,className:o="",onClick:x}=e;return(0,a.jsxs)(r.Zp,{className:"transition-all hover:shadow-md rounded-sm ".concat(x?"cursor-pointer":""," ").concat(o),onClick:x,children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",children:t}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[c&&(0,a.jsx)(i.E,{variant:c.variant||"default",className:"text-xs",children:c.text}),l&&(0,a.jsx)(l,{className:"h-4 w-4 text-muted-foreground"})]})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s}),n&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:n}),d&&(0,a.jsx)("div",{className:"flex items-center mt-2",children:(0,a.jsxs)(i.E,{variant:d.isPositive?"success":"destructive",className:"text-xs",children:[d.isPositive?"+":"",d.value]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[863,372,118,516,508,788,746,847,358],()=>t(5880)),_N_E=e.O()}]);